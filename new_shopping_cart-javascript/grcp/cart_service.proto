syntax = "proto3";

option java_package = "org.fruit";
option java_outer_classname = "FruitCartProto";


service CartService {
  rpc ProcessFruits(FruitRequest) returns (FruitResponseDTO);
}

message FruitRequest {
  repeated string items = 1;  // List of fruit names
}


enum Fruit {
  UNKNOWN = 0;
  apple = 1;
  lime = 2;
  banana = 3;
  melon = 4;
}

enum Offer {
    nooffer= 0;
    BOGO = 1;
    THREEFORTWO=2;
 }

message FruitPriceDTO {
  Fruit fruit = 1;      // Fruit name
  Offer offer = 2;      // Applied offer/discount
  double unit_price = 3; // Using snake_case for proto field names
  int32 quantity = 4;    // Quantity of this fruit
  double charged = 5;    // Actual charged amount
  double avg_price = 6;  // Average price per unit
}
message FruitResponseDTO {
  repeated FruitPriceDTO fruits = 1;  // List of processed fruits
  int32 total_quantity = 2;          // Sum of all quantities
  double total_price = 3;            // Grand total price
}

// Removed unused FruitResponse message since you're using FruitResponseDTO